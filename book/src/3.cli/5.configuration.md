# Configuration

The Teams CLI provides tools for configuring your Teams applications through the `config` command. This page explains how to use this command to add and remove configurations from your projects.

## Configuration Overview

The `config` command allows you to add or remove specific configurations to your Teams application. These configurations can include:

- Teams Toolkit integration
- Authentication settings
- Deployment configurations
- Other project-specific settings

## Using the Config Command

The `config` command has two main subcommands:

- `add`: Add a configuration to your project
- `remove`: Remove a configuration from your project

### Adding Configurations

To add a configuration to your project:

```sh
teams config add <configuration-name>
```

For example, to add Teams Toolkit configuration for local development:

```sh
teams config add ttk.local
```

### Removing Configurations

To remove a configuration from your project:

```sh
teams config remove <configuration-name>
```

For example, to remove Teams Toolkit configuration:

```sh
teams config remove ttk.local
```

## Available Configurations

### Teams Toolkit Integration

The Teams Toolkit configuration (`ttk`) adds the necessary files and settings to make your application compatible with the Microsoft Teams Toolkit extension for Visual Studio Code.

#### Adding Teams Toolkit Configuration

```sh
teams config add ttk.<environment>
```

Where `<environment>` can be:
- `local`: For local development
- `dev`: For development environment
- `test`: For testing environment
- `prod`: For production environment

For example:

```sh
teams config add ttk.local
```

This will:
1. Create or update the `.env.local` file with Teams Toolkit-specific variables
2. Create a `teamsapp.yml` file if it doesn't exist
3. Add Teams Toolkit-specific settings to your project

#### Removing Teams Toolkit Configuration

```sh
teams config remove ttk.<environment>
```

For example:

```sh
teams config remove ttk.local
```

This will remove Teams Toolkit-specific settings from your project, but will not delete any files.

### Authentication Configuration

The authentication configuration (`auth`) adds the necessary files and settings to enable authentication in your application.

#### Adding Authentication Configuration

```sh
teams config add auth
```

This will:
1. Add authentication-related packages to your `package.json`
2. Create authentication helper files in your project
3. Update your environment files with authentication-related variables

#### Removing Authentication Configuration

```sh
teams config remove auth
```

This will remove authentication-specific settings from your project, but will not delete any files.

## Configuration Files

The Teams CLI creates and modifies several configuration files in your project:

### package.json

The CLI may add dependencies or scripts to your `package.json` file when adding configurations.

Example additions:

```json
{
  "dependencies": {
    "@microsoft/teams.auth": "^0.2.0"
  },
  "devDependencies": {
    "@microsoft/teams.devtools": "^0.2.0"
  }
}
```

### teamsapp.yml

When adding Teams Toolkit configuration, the CLI creates or updates a `teamsapp.yml` file in your project root. This file contains configuration for the Teams Toolkit extension.

Example:

```yaml
version: 1.0.0
projectId: 00000000-0000-0000-0000-000000000000
environment: local
applicationName: My Teams App
components:
  - name: bot
    path: .
    type: bot
    sso: false
    endpoint: https://localhost:3978/api/messages
```

### .env Files

The CLI updates environment files (`.env.<environment>`) with configuration-specific variables.

Example additions to `.env.local`:

```
# Teams Toolkit Configuration
TEAMS_APP_ID=00000000-0000-0000-0000-000000000000
BOT_ID=00000000-0000-0000-0000-000000000000
BOT_PASSWORD=your-bot-password
```

## Best Practices

### Version Control

Always add configuration files to version control, except for environment files containing secrets. This ensures that all team members have the same configuration.

Add the following to your `.gitignore` file:

```
# Environment files
.env.*
!.env.example

# Local configuration
*.local.*
```

### Documentation

Document any custom configurations in your project's README.md file, including:

- Required environment variables
- Configuration steps
- Dependencies

### Configuration Validation

After adding a configuration, validate that it works correctly:

1. Check that all required files were created
2. Verify that environment variables are set correctly
3. Test the functionality that depends on the configuration

## Troubleshooting

### Configuration Conflicts

If you encounter conflicts between different configurations:

1. Check for duplicate entries in configuration files
2. Ensure environment variables don't conflict
3. Try removing and re-adding the configurations in a different order

### Missing Dependencies

If you see errors about missing dependencies after adding a configuration:

```sh
npm install
```

This will install any new dependencies added by the configuration.

### Invalid Configuration

If a configuration is invalid or corrupted:

1. Remove the configuration:
   ```sh
   teams config remove <configuration-name>
   ```

2. Re-add the configuration:
   ```sh
   teams config add <configuration-name>
   ```

## Next Steps

- [See common usage examples](./6.examples.md)
- [Learn about Teams Toolkit integration](../7.devtools/README.md)
- [Explore authentication options](../3.basics/7.auth.md)
